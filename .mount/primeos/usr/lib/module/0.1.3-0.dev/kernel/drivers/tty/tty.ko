---@type module_manifest
local manifest = {
    name = "kernel.drivers.tty",
    version = "0.1.3-0.dev",
    path = "kernel/drivers/tty/tty",
    depends = { "kernel.signal", "kernel.drivers.tty.vt" }
}

local tty = {}

-- TTY状態管理
local tty_state = {
    termios = {
        c_iflag = 0,  -- 入力モードフラグ
        c_oflag = 0,  -- 出力モードフラグ
        c_cflag = 0,  -- 制御モードフラグ
        c_lflag = 0,  -- ローカルモードフラグ
        c_cc = {}     -- 制御文字
    },
    foreground_pgid = nil,
    session_leader = nil,
    input_buffer = "",
    output_buffer = "",
    is_canonical = true,
    echo_enabled = true,
    process = {
        foreground_pgrp = nil,
        session = nil,
        intr_char = 0x03,  -- Ctrl-C
        quit_char = 0x1C,  -- Ctrl-\
        susp_char = 0x1A   -- Ctrl-Z
    }
}

-- 制御文字の定義
local VINTR    = 1   -- Ctrl-C
local VQUIT    = 2   -- Ctrl-\
local VERASE   = 3   -- バックスペース
local VKILL    = 4   -- Ctrl-U
local VEOF     = 5   -- Ctrl-D
local VTIME    = 6
local VMIN     = 7
local VSWTC    = 8
local VSTART   = 9   -- Ctrl-Q
local VSTOP    = 10  -- Ctrl-S
local VSUSP    = 11  -- Ctrl-Z
local VEOL     = 12
local VREPRINT = 13  -- Ctrl-R
local VDISCARD = 14  -- Ctrl-O
local VWERASE  = 15  -- Ctrl-W
local VLNEXT   = 16  -- Ctrl-V
local VEOL2    = 17

function init()
    
end

return tty, init, manifest
