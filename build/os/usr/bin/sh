---@type stdin
local stdin = require("io.stdin")
---@type stdout
local stdout = require("io.stdout")
---@type stderr
local stderr = require("io.stderr")
---@type user
local user = require("system.user")
---@type filesystem
local fs = require("system.filesystem")
---@type date
local date = require("system.util.date")
---@type permission
local permission = require("system.permission")
---@type printUtils
local printutils = require("system.util.print")
---@type process
local process = require("system.process")

while true do
    stdout:write("&4$&0 ")
    local value = stdin:read()
    local path = fs.combine(fs.cwd(), value)
    local tokens = {}
    for t in string.gmatch(path, "%S+") do
        table.insert(tokens, t)
    end
    if fs.exists(tokens[1]) then
        process.exec(table.remove(tokens, 1), nil, nil, tokens)
    else
        stderr:write("sh: No such file\n")
    end
    coroutine.yield()
end
